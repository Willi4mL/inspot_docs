!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports):"function"==typeof define&&define.amd?define(["exports"],a):a((e="undefined"!=typeof globalThis?globalThis:e||self).ESRGANLegacy={})}(this,function(e){"use strict";const c=e=>{return Array.isArray(e)?e[0]:e},s=({scale:r,name:e,version:a,meta:{architecture:t,...s},path:n})=>{n=n||`models/x${r}/model.json`;return"rdn"===t?{scale:r,modelType:"layers",_internals:{path:n,name:e,version:a},meta:{architecture:t,...s},inputRange:[0,255],outputRange:[0,255]}:{setup:t=>{const s=t.layers.Layer;class e extends s{beta;constructor(){super({}),this.beta=.2}call(e){return t.mul(c(e),this.beta)}static className="MultiplyBeta"}[e,(e=>{class a extends s{scale=e;constructor(){super({})}computeOutputShape(e){return[e[0],e[1],e[2],3]}call(e){return t.depthToSpace(c(e),this.scale,"NHWC")}static className=`PixelShuffle${r}x`}return a})(r)].forEach(e=>{t.serialization.registerClass(e)})},scale:r,modelType:"layers",_internals:{path:n,name:e,version:a},meta:{architecture:t,...s},inputRange:[0,1],outputRange:[0,1]}},r="@upscalerjs/esrgan-legacy",n="1.0.0-beta.14";var a=(e,a,t="rdn")=>s({scale:e,path:`models/${a}/model.json`,name:r,version:n,meta:{dataset:"div2k",architecture:t}}),t=a(2,"div2k/x2"),l=a(3,"div2k/x3"),i=a(4,"div2k/x4"),a=a(2,"psnr-small"),o=s({scale:4,path:"models/gans/model.json",name:r,version:n,meta:{dataset:"div2k",architecture:"rrdn"}});e.ESRGANLegacyDiv2kX2=t,e.ESRGANLegacyDiv2kX3=l,e.ESRGANLegacyDiv2kX4=i,e.ESRGANLegacyGANS=o,e.ESRGANLegacyPSNRSmall=a});